<template>
    <a-form :form="form">
        <a-form-item label="信息标题" :label-col="{ span: 5 }" :wrapper-col="{ span: 16 }">
            <a-input v-decorator="['title', { rules: [{ required: true, message: 'Please input your note!' }] }]" placeholder="标题" />
        </a-form-item>
        <a-form-item label="信息内容" :label-col="{ span: 5 }" :wrapper-col="{ span: 16 }">
            <a-textarea :rows="5" v-decorator="[
            'content',
            { rules: [{required: true, message: '描述' }]}
          ]" placeholder="内容" />
        </a-form-item>
    </a-form>
</template>
<script>
export default {
    props: {
        value: [Array, Object, Number, String]
    },
    data() {
        return {
        	send_user:'',
        	get_user:'',
            form: this.$form.createForm(this)
        };
    },
    async mounted() {
    	console.log(this.value)
        this.send_user = this.value.send_user;
        this.get_user = this.value.get_user?this.value.get_user:'';
    },
    methods: {
        affirm(e) {
            let { $cloud,value, send_message } = this;
            let { handleCancel } = e;
            this.form.validateFields((err, values) => {
                if (!err) {
                    send_message(values)
                    handleCancel();
                }
            })
        },
        send_message(values) {
            let that = this
            values['send_user'] = this.send_user;
            values['get_user'] = this.get_user;
            // this.$cloud.sendmsg(values).then(res => {
            //     if (res) {
            //         that.$cloud.socket.send({ userId: this.send_user, get_user: this.get_user, message: 'getmsg' })
            //         that.$message.success("发送成功");
            //     }

            // })
        }
    },
};
</script>