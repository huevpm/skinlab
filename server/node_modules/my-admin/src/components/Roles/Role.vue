<template>
  <ul class="wrapper">
    <!-- 遍历 router 菜单数据 -->
    <RoleItem :key="index" v-for="(menu, index) in menuInfo">
      <!-- 对于没有 children 子菜单的 item -->
      <div class="item-title" v-if="!menu.children">
        <h4>{{menu.title}}</h4>
        <div v-if="menu.rules">
          <a-checkbox-group @change="onChange" v-model="permList[menu.name]">
            <a-checkbox :value="item.name" v-for="(item, index) in menu.rules" :key="index">{{item.title}}</a-checkbox>
          </a-checkbox-group>
        </div>
      </div>
      <!-- 对于有 children 子菜单的 item -->
      <div v-else>
        <h3 class="item-title">{{menu.title}}</h3>
        <!-- 递归操作 -->
        <Roles :router="menu.children" v-model="permList"></Roles>
      </div>
    </RoleItem>
  </ul>
</template>
<script type="text/javascript">
import RoleItem from "./RoleItem";

export default {
  name: "Roles",
  props: {
    router: [Object, Array],
    value: {
      type: Object,
      default: function() {
        return {}
      }
    }
  },
  components: { RoleItem },
  data() {
    return {
      toggleShow: false // toggle 状态
    };
  },
  /**
   * 计算属性
   * @type {Object}
   */
  computed: {
    permList: {
      get() {
        return this.value
      },
      set(value) {
        this.$emit('input', value);
      }
    },
    menuInfo: function() {
      return this.router;
    }
  },

  methods: {
    onChange(checkedValues) {
      console.log('checked = ', checkedValues);
    }
  }
};
</script>
<style type="text/css" lang="less">
.wrapper {
  cursor: pointer;
}

.item-title {
  font-size: 14px;
}
</style>