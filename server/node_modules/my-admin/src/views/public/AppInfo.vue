<template>
  <div class="main">
    <a-card :title="apply.name" style="width: 420px" v-for="(apply, index) in applist" :key="index">
      <a slot="extra" @click="copyCode(index)" :data-id="index">复制代码</a>
      <p>AppID: <span>{{apply.AppID}}</span></p>
      <p>AppSecret: <span>{{apply.AppSecret}}</span></p>
    </a-card>
  </div>
</template>
<script type="text/javascript">
import { mapActions } from 'vuex'
import Vue from 'vue'
import VueClipboard from 'vue-clipboard2'

VueClipboard.config.autoSetContainer = true

Vue.use(VueClipboard)
export default {
  components: {
    //empty
  },
  data() {
    return {

    }
  },
  /**
   * 计算属性
   * @type {Object}
   */
  computed: {
    applist() {
      return this.$store.state.app.applist
    }
  },
  /**
   * 数据监听
   * @type {Object}
   */
  watch: {

  },
  /**
   * 页面加载执行
   * @return {[type]} [description]
   */
  async mounted() {
    console.log("查看", this)
    if (this.applist.length < 1) {
      this.$router.push({ path: '/' })
    }
  },
  /**
   * 页面方法
   * @type {Object}
   */
  methods: {
    copyCode(index) {
      console.log("event", index)
      let data = this.applist[index];
      let { $message } = this;
      this.$copyText(`
AppID: "${data.AppID}",
AppSecret: "${data.AppSecret}",
        `).then(
        res => {
          console.log(res)
          $message.success("复制成功")
        },
        err => {
          $message.error("复制失败")
        }
      )
    }
  }
}
</script>
<style type="text/css" lang="scss">
</style>