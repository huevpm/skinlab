const a2_0x54b0=['reduce','axiosException','VERBOSE_LOGGING','push','distributedExecutionId','messages','fileStorage','__esModule','response','next','hashUrls','resolve','status','There\x20are\x20several\x20reasons\x20why\x20this\x20can\x20happen.','note','Nx\x20Cloud:\x20Skipping\x20storing\x20','extractErrorMessage','defineProperty','then','value','storeInCurrentProcess','remote-cache-hit','api','scheduledTasks','apply','cache-miss','statuses','indexOf','cacheError','CloudRemoteCache','../../../utilities/environment','done','waitForStoreRequestsToComplete','put','filter','__awaiter','.\x20Status\x20404.','runContext','retrieve','all','storeRequests','requests','delayedStoreRequests','get','../../../utilities/nx-imports-light','store','storage'];(function(_0x25126b,_0x54b0d5){const _0x37ec3a=function(_0xbb0f9f){while(--_0xbb0f9f){_0x25126b['push'](_0x25126b['shift']());}};_0x37ec3a(++_0x54b0d5);}(a2_0x54b0,0xff));const a2_0x37ec=function(_0x25126b,_0x54b0d5){_0x25126b=_0x25126b-0x0;let _0x37ec3a=a2_0x54b0[_0x25126b];return _0x37ec3a;};'use strict';var __awaiter=this&&this[a2_0x37ec('0xf')]||function(_0x3eec1a,_0xcfca5b,_0x31133a,_0x523d3a){function _0x39ecfe(_0x387078){return _0x387078 instanceof _0x31133a?_0x387078:new _0x31133a(function(_0x3754c9){_0x3754c9(_0x387078);});}return new(_0x31133a||(_0x31133a=Promise))(function(_0x3dd0e3,_0x5bb5ee){function _0x55678c(_0x1bc081){try{_0x202dab(_0x523d3a[a2_0x37ec('0x24')](_0x1bc081));}catch(_0x481bb2){_0x5bb5ee(_0x481bb2);}}function _0x21a102(_0x1a0111){try{_0x202dab(_0x523d3a['throw'](_0x1a0111));}catch(_0x48ff1d){_0x5bb5ee(_0x48ff1d);}}function _0x202dab(_0x1f9cf2){_0x1f9cf2[a2_0x37ec('0xb')]?_0x3dd0e3(_0x1f9cf2[a2_0x37ec('0x2e')]):_0x39ecfe(_0x1f9cf2['value'])['then'](_0x55678c,_0x21a102);}_0x202dab((_0x523d3a=_0x523d3a[a2_0x37ec('0x4')](_0x3eec1a,_0xcfca5b||[]))['next']());});};Object[a2_0x37ec('0x2c')](exports,a2_0x37ec('0x22'),{'value':!![]});exports[a2_0x37ec('0x9')]=void 0x0;const environment_1=require(a2_0x37ec('0xa'));const {output}=require(a2_0x37ec('0x18'));class CloudRemoteCache{constructor(_0x1e6d12,_0x5000cf,_0x460f29,_0x3d897d,_0x2a8450,_0x3b0360){this[a2_0x37ec('0x20')]=_0x1e6d12;this['api']=_0x5000cf;this[a2_0x37ec('0x11')]=_0x460f29;this[a2_0x37ec('0x21')]=_0x3d897d;this[a2_0x37ec('0x1f')]=_0x2a8450;this['storeInCurrentProcess']=_0x3b0360;this[a2_0x37ec('0x14')]=[];this[a2_0x37ec('0x16')]=[];}[a2_0x37ec('0x12')](_0x1ea081,_0x465108){var _0x7b102c;return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x37ec('0x20')][a2_0x37ec('0x8')])return![];const _0x506a80=yield this[a2_0x37ec('0x25')](_0x1ea081);if(!_0x506a80||!_0x506a80[a2_0x37ec('0x17')]){if(environment_1[a2_0x37ec('0x1d')]){output['note']({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0x1ea081+'.'});}this['runContext'][a2_0x37ec('0x6')][_0x1ea081]='cache-miss';return![];}try{yield this[a2_0x37ec('0x21')][a2_0x37ec('0x12')](_0x1ea081,_0x506a80[a2_0x37ec('0x17')],_0x465108);this[a2_0x37ec('0x11')][a2_0x37ec('0x6')][_0x1ea081]=a2_0x37ec('0x1');return!![];}catch(_0x371c4d){const _0x52e7b7=(_0x7b102c=_0x371c4d[a2_0x37ec('0x1c')])!==null&&_0x7b102c!==void 0x0?_0x7b102c:_0x371c4d;if(_0x52e7b7[a2_0x37ec('0x23')]&&_0x52e7b7[a2_0x37ec('0x23')][a2_0x37ec('0x27')]===0x194){if(environment_1[a2_0x37ec('0x1d')]){output[a2_0x37ec('0x29')]({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0x1ea081+a2_0x37ec('0x10')});}}else{this[a2_0x37ec('0x20')][a2_0x37ec('0x8')]=this[a2_0x37ec('0x20')][a2_0x37ec('0x2b')](_0x52e7b7,a2_0x37ec('0x1a'));}this[a2_0x37ec('0x11')][a2_0x37ec('0x6')][_0x1ea081]=a2_0x37ec('0x5');return![];}});}[a2_0x37ec('0x19')](_0x1b7ed4,_0x5c5f5c){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x37ec('0x20')][a2_0x37ec('0x8')])return![];const _0x4f27b2=Promise[a2_0x37ec('0x26')]()[a2_0x37ec('0x2d')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x11ddae;const _0xc1bfac=yield this[a2_0x37ec('0x25')](_0x1b7ed4);if(!_0xc1bfac)return![];if(!_0xc1bfac[a2_0x37ec('0xd')]){if(environment_1[a2_0x37ec('0x1d')]){output[a2_0x37ec('0x29')]({'title':a2_0x37ec('0x2a')+_0x1b7ed4+'.','bodyLines':[a2_0x37ec('0x28'),'Maybe\x20you\x20are\x20using\x20a\x20read-only\x20token\x20or\x20the\x20artifact\x20has\x20already\x20being\x20uploaded.']});}return!![];}if(!this[a2_0x37ec('0x0')]){this[a2_0x37ec('0x16')][a2_0x37ec('0x1e')]({'hash':_0x1b7ed4,'url':_0xc1bfac[a2_0x37ec('0xd')]});return!![];}try{yield this['fileStorage'][a2_0x37ec('0x19')](_0x1b7ed4,_0xc1bfac[a2_0x37ec('0xd')],_0x5c5f5c);return!![];}catch(_0x47b5a1){const _0x3defc6=(_0x11ddae=_0x47b5a1[a2_0x37ec('0x1c')])!==null&&_0x11ddae!==void 0x0?_0x11ddae:_0x47b5a1;this[a2_0x37ec('0x20')]['cacheError']=this[a2_0x37ec('0x20')][a2_0x37ec('0x2b')](_0x3defc6,a2_0x37ec('0x1a'));return![];}}));this[a2_0x37ec('0x14')][a2_0x37ec('0x1e')](_0x4f27b2);return _0x4f27b2;});}['hashUrls'](_0x20ca53){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x20ca53 in this['runContext'][a2_0x37ec('0x15')]){return(yield this[a2_0x37ec('0x11')]['requests'][_0x20ca53])[_0x20ca53];}else{const _0x12af35=this['runContext'][a2_0x37ec('0x3')][a2_0x37ec('0xe')](_0xc7b27c=>!this[a2_0x37ec('0x11')]['requests'][_0xc7b27c['hash']])['map'](_0x2c8ba7=>_0x2c8ba7['hash']);if(_0x12af35[a2_0x37ec('0x7')](_0x20ca53)===-0x1){_0x12af35[a2_0x37ec('0x1e')](_0x20ca53);}const _0x241d56=this[a2_0x37ec('0x2')]['startRun'](this[a2_0x37ec('0x1f')],_0x12af35);_0x12af35['forEach'](_0x673353=>{this[a2_0x37ec('0x11')][a2_0x37ec('0x15')][_0x673353]=_0x241d56;});return(yield _0x241d56)[_0x20ca53];}});}[a2_0x37ec('0xc')](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4b5725=yield Promise[a2_0x37ec('0x13')](this[a2_0x37ec('0x14')])['then'](_0x2c9243=>_0x2c9243[a2_0x37ec('0x1b')]((_0x269cb5,_0x130aa4)=>_0x269cb5&&_0x130aa4,!![]));if(!_0x4b5725){throw new Error('Error\x20when\x20storing\x20artifacts');}});}}exports['CloudRemoteCache']=CloudRemoteCache;