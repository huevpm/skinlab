const a5_0x5dbc=['branch','/nx-cloud/executions/complete-run-group','tasks','VERBOSE_LOGGING','done','error','createMetricRecorder','../../../utilities/nx-imports-light','apiAxiosInstance','Completing\x20with\x20an\x20error','value','recordMetric','RUNNER_FAILURE_PERF_ENTRY','createApiAxiosInstance','runGroup','axiosMultipleTries','agentName','then','apply','ciExecutionEnv','../../../utilities/metric-logger','note','ciExecutionId:\x20','/nx-cloud/executions/tasks','axiosException','../../../utilities/axios','__awaiter','__esModule','ciExecutionId','ciExecutionEnv:\x20','data','throw','next','../../../utilities/environment','defineProperty','response','error:\x20','Completed\x20run\x20group\x20with\x20an\x20error','post','runGroup:\x20','mapRespToPerfEntry','completeRunGroup'];(function(_0x17c20a,_0x5dbcae){const _0x4d2466=function(_0x215469){while(--_0x215469){_0x17c20a['push'](_0x17c20a['shift']());}};_0x4d2466(++_0x5dbcae);}(a5_0x5dbc,0xc7));const a5_0x4d24=function(_0x17c20a,_0x5dbcae){_0x17c20a=_0x17c20a-0x0;let _0x4d2466=a5_0x5dbc[_0x17c20a];return _0x4d2466;};'use strict';var __awaiter=this&&this[a5_0x4d24('0x25')]||function(_0x49f187,_0x18e4b6,_0x1c369a,_0x552cf2){function _0x5c1c22(_0x5e941e){return _0x5e941e instanceof _0x1c369a?_0x5e941e:new _0x1c369a(function(_0x269903){_0x269903(_0x5e941e);});}return new(_0x1c369a||(_0x1c369a=Promise))(function(_0x2871c9,_0x550d6e){function _0x442294(_0x44a24b){try{_0x167482(_0x552cf2[a5_0x4d24('0x1')](_0x44a24b));}catch(_0x39c222){_0x550d6e(_0x39c222);}}function _0x41779e(_0x53a556){try{_0x167482(_0x552cf2[a5_0x4d24('0x0')](_0x53a556));}catch(_0x3b3b5e){_0x550d6e(_0x3b3b5e);}}function _0x167482(_0x228037){_0x228037[a5_0x4d24('0xf')]?_0x2871c9(_0x228037[a5_0x4d24('0x15')]):_0x5c1c22(_0x228037['value'])[a5_0x4d24('0x1c')](_0x442294,_0x41779e);}_0x167482((_0x552cf2=_0x552cf2[a5_0x4d24('0x1d')](_0x49f187,_0x18e4b6||[]))[a5_0x4d24('0x1')]());});};Object[a5_0x4d24('0x3')](exports,a5_0x4d24('0x26'),{'value':!![]});exports['DistributedAgentApi']=void 0x0;const axios_1=require(a5_0x4d24('0x24'));const environment_1=require(a5_0x4d24('0x2'));const metric_logger_1=require(a5_0x4d24('0x1f'));const {output}=require(a5_0x4d24('0x12'));class DistributedAgentApi{constructor(_0x444ea7,_0x59e1b1,_0x3eb190,_0x31749a,_0x2e659d,_0xad3adb){this[a5_0x4d24('0xb')]=_0x59e1b1;this[a5_0x4d24('0x19')]=_0x3eb190;this['ciExecutionId']=_0x31749a;this['ciExecutionEnv']=_0x2e659d;this[a5_0x4d24('0x1b')]=_0xad3adb;this[a5_0x4d24('0x13')]=(0x0,axios_1[a5_0x4d24('0x18')])(_0x444ea7);}[a5_0x4d24('0xd')](_0x5abcf7,_0x3854e1,_0x2e13c7,_0x2c3463){var _0x2fe29b;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4db7d7=(0x0,metric_logger_1[a5_0x4d24('0x11')])('dtePollTasks');try{const _0x11bae8=yield(0x0,axios_1[a5_0x4d24('0x1a')])(()=>this[a5_0x4d24('0x13')][a5_0x4d24('0x7')](a5_0x4d24('0x22'),{'runGroup':this[a5_0x4d24('0x19')],'ciExecutionId':this[a5_0x4d24('0x27')],'ciExecutionEnv':this[a5_0x4d24('0x1e')],'agentName':this[a5_0x4d24('0x1b')],'executionId':_0x5abcf7,'statusCode':_0x3854e1,'completedTasks':_0x2e13c7,'targets':_0x2c3463}));_0x4db7d7['recordMetric']((0x0,metric_logger_1[a5_0x4d24('0x9')])(_0x11bae8));return _0x11bae8[a5_0x4d24('0x29')];}catch(_0xdf306f){_0x4db7d7[a5_0x4d24('0x16')](((_0x2fe29b=_0xdf306f===null||_0xdf306f===void 0x0?void 0x0:_0xdf306f[a5_0x4d24('0x23')])===null||_0x2fe29b===void 0x0?void 0x0:_0x2fe29b[a5_0x4d24('0x4')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0xdf306f[a5_0x4d24('0x23')][a5_0x4d24('0x4')]):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);throw _0xdf306f;}});}['completeRunGroupWithError'](_0x105ae9){var _0x34cce0;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a5_0x4d24('0xe')]){output[a5_0x4d24('0x20')]({'title':a5_0x4d24('0x14'),'bodyLines':[a5_0x4d24('0x21')+this[a5_0x4d24('0x27')],a5_0x4d24('0x28')+this['ciExecutionEnv'],a5_0x4d24('0x8')+this[a5_0x4d24('0x19')],a5_0x4d24('0x5')+_0x105ae9]});}const _0x559857=(0x0,metric_logger_1[a5_0x4d24('0x11')])(a5_0x4d24('0xa'));try{const _0x4fb203=yield(0x0,axios_1[a5_0x4d24('0x1a')])(()=>this[a5_0x4d24('0x13')][a5_0x4d24('0x7')](a5_0x4d24('0xc'),{'branch':this['branch'],'runGroup':this['runGroup'],'ciExecutionId':this['ciExecutionId'],'ciExecutionEnv':this[a5_0x4d24('0x1e')],'agentName':this[a5_0x4d24('0x1b')],'criticalErrorMessage':_0x105ae9}));if(environment_1['VERBOSE_LOGGING']){output['note']({'title':a5_0x4d24('0x6')});}_0x559857[a5_0x4d24('0x16')]((0x0,metric_logger_1[a5_0x4d24('0x9')])(_0x4fb203));}catch(_0x1f7db1){_0x559857[a5_0x4d24('0x16')](((_0x34cce0=_0x1f7db1===null||_0x1f7db1===void 0x0?void 0x0:_0x1f7db1[a5_0x4d24('0x23')])===null||_0x34cce0===void 0x0?void 0x0:_0x34cce0[a5_0x4d24('0x4')])?(0x0,metric_logger_1[a5_0x4d24('0x9')])(_0x1f7db1[a5_0x4d24('0x23')][a5_0x4d24('0x4')]):metric_logger_1[a5_0x4d24('0x17')]);console[a5_0x4d24('0x10')](_0x1f7db1);}});}}exports['DistributedAgentApi']=DistributedAgentApi;